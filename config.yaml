# P-CLI 配置文件

# 默认 IDE（可选: cursor, code, windsurf, trae，或自定义命令）
ide: cursor

# Hooks 定义（在根节点声明，供模板引用）
# 每个 hook 可以使用 command（命令）或 file（脚本文件名，必须是 .js）
hooks:
  gitInit:
    name: Git 初始化
    command: git init

  bunInit:
    name: Bun 初始化
    command: bun init -y

  installDeps:
    name: 安装依赖
    command: bun install

  taze:
    name: Taze 递归 major 版本更新
    command: bunx taze major -r -w

  biome:
    name: Biome 初始化
    command: bun add -D --save-exact @biomejs/biome && bunx @biomejs/biome init

  changeset:
    name: Changeset 初始化
    command: bun add -D @changesets/cli && bunx changeset init

  vitest:
    name: 安装 Vitest（React）依赖
    command: bun add -D vitest jsdom @testing-library/react @testing-library/jest-dom

  # 自定义脚本示例（file 必须是 .js 文件）:
  # myScript:
  #   name: 自定义脚本
  #   file: my-script.js

# 模板配置
# 每个模板可以指定需要执行的 hooks 列表（按顺序执行）
# 使用 command（命令）或 dir（本地模板文件夹名）
templates:
  # 空项目模板（p new <name> 的默认配置）
  empty:
    name: 空项目

  shadcn:
    name: shadcn/ui 项目（询问项目名时，输入 . 在项目根目录下创建）
    command: bunx --bun shadcn@latest init

  # 做 npm 包的模板
  bun-npm:
    name: Bun NPM 包
    dir: bun-tsup
    hooks:
      - gitInit

  react:
    name: React (Vite)
    command: bun create vite . --template react-ts --rolldown
    hooks:
      - gitInit
      - installDeps

  next:
    name: Next.js
    command: bunx create-next-app@latest . --yes

  vue:
    name: Vue (Vite)
    command: bun create vite . --template vue-ts --rolldown
    hooks:
      - gitInit
      - installDeps

  remix:
    name: Remix(Docker)
    command: bunx create-react-router@latest . --yes
    hooks:
      - biome

  remix-cf:
    name: Remix(React Router) Cloudflare
    command: bun create react-router@latest . --template https://github.com/remix-run/react-router-templates/tree/main/cloudflare --no-git-init --no-install "--framework=react-router"
    hooks:
      - gitInit
      - biome
      - vitest

  react-router-cf:
    name: React Router v7 + CF Workers
    dir: react-router-cf
    hooks:
      - gitInit

  # 本地模板模式 - 使用 dir 字段（模板文件夹名）
  # custom:
  #   name: 自定义模板
  #   dir: my-template
  #   hooks:
  #     - gitInit
  #     - installDeps
